# @configure_input@

# Modify these top variables.
SOURCES = \
	ftp_core.c \
	ftp_protocol.c

HEADERS = \
	ftp.h \
	server_config.h

CFLAGS = -Wc,-Wall -Wc,-Werror -Wc,-fno-strict-aliasing
LDADD = 
EXTRA_DIST = TODO AUTHORS README NEWS ChangeLog

#Don't modify anything below here

srcdir = @srcdir@

all: @PACKAGE_NAME@.la

OBJ = $(SOURCES:.c=.o)

LO = $(SOURCES:.c=.lo)

SLO = $(SOURCES:.c=.slo)

STD_DIST = install-sh \
	config.sub \
	config.guess \
	aclocal.m4 \
	Makefile.in \
	configure.ac \
	configure \
	stamp-h.in \
	config.h.in

DISTFILES = $(STD_DIST) $(EXTRA_DIST) $(SOURCES) $(HEADERS)

TODO: TODO_HEADER $(SOURCES) $(HEADERS)
	./gen_todo.pl

@PACKAGE_NAME@.la : $(SOURCES) $(HEADERS)
	@APXS_BIN@ -c -o @PACKAGE_NAME@.la $(CFLAGS) @DEFS@ $(SOURCES) 

include:
	rm -rf include
	ln -s @APACHE_INCDIR@ include
.PHONY: include

install:
	@APXS_BIN@ -i -a -n $(subst mod_,,@PACKAGE_NAME@) @PACKAGE_NAME@.la

update:
	@APXS_BIN@ -i -n $(subst mod_,,@PACKAGE_NAME@) @PACKAGE_NAME@.la

clean:
	$(RM) $(OBJ) $(SLO) $(LO) @PACKAGE_NAME@.la

DESTDIR = @PACKAGE_TARNAME@-@PACKAGE_VERSION@
DESTTGZ = $(DESTDIR).tar.gz
dist: $(DISTFILES)
	rm -rf $(DESTDIR)
	mkdir -p $(DESTDIR)
	cp -dp --parents $(DISTFILES) $(DESTDIR)
	tar -zcf $(DESTTGZ) $(DESTDIR)
	rm -rf $(DESTDIR)

distclean: clean
	$(RM) TODO config.status config.log config.h config.h.in \
	configure stamp-h stamp-h.in Makefile

# Regenerate makefiles
# autoheader might not change config.h.in, so touch a stamp file.
$(srcdir)/config.h.in: stamp-h.in
$(srcdir)/stamp-h.in: configure.ac aclocal.m4
	cd $(srcdir) && autoheader-2.53
	echo timestamp > $(srcdir)/stamp-h.in

config.h: stamp-h
stamp-h: config.h.in config.status
	./config.status

$(srcdir)/configure: configure.ac aclocal.m4
	cd $(srcdir) && autoconf-2.53

Makefile: Makefile.in config.status
	./config.status

config.status: configure
	./config.status --recheck
